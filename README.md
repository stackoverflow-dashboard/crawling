# Stack Overflow ì§ˆë¬¸ ë¶„ì„ì„ ìœ„í•œ ëŒ€ì‹œë³´ë“œ

# ëª©ì°¨
1. ëª©ì 
2. ê¸°ëŒ€íš¨ê³¼
3. í”„ë¡œì íŠ¸ ì§„í–‰
    1. ì£¼ì œì„ ì •
    2. ERD ì‘ì„±
    3. ë°ì´í„° í¬ë¡¤ë§ - selenium
    4. ë°ì´í„° ì ì¬ - S3
    5. í…Œì´ë¸” ìƒì„± - Snowflake
    6. ì°¨íŠ¸ ìƒì„± ë° ëŒ€ì‹œë³´ë“œ êµ¬ì„± - preset

# ëª©ì 

stackoverflow ì§ˆë¬¸ ë°ì´í„°ë¥¼ í™œìš©í•˜ì—¬ ë‹¤ì–‘í•œ ê¸°ìˆ  íŠ¸ë Œë“œ ë° í™œë™ ìƒí™©ì„ ë¶„ì„í•˜ê³  ì‹œê°í™”í•˜ì—¬ ì œê³µí•©ë‹ˆë‹¤.

- ë‹¤ì–‘í•œ ê¸°ìˆ  íŠ¸ë Œë“œ ë° ì¸ê¸°ë„ì— ëŒ€í•œ ì¸ì‚¬ì´íŠ¸ ì œê³µ
- stackoverflow ì§ˆë¬¸ìˆ˜ì™€ ë‹µë³€ìˆ˜ë¡œ ê°œë°œì ê°„ì˜ êµë¥˜ê°€ í™œë°œí•œì§€ íŒŒì•…

# ê¸°ëŒ€íš¨ê³¼

- í˜„ì¬ ê¸°ìˆ  íŠ¸ë Œë“œì™€ ì§€ì†ì ì¸ ì¸ê¸°ë„ íŒŒì•…
- ì¼ë³„ ì§ˆë¬¸ìˆ˜ì™€ ë‹µë³€ìˆ˜ë¡œ stackoverflowì˜ í™œì„±ë„ í™•ì¸
- ìš”ì¼ë³„ ì§ˆë¬¸ ëŒ€ë¹„ ë‹µë³€ ë¹„ìœ¨ì„ í™•ì¸í•˜ì—¬ ë‹µë³€ ë°›ì„ í™•ë¥  í™•ì¸
- íŠ¹ì • ê¸°ìˆ ë“¤ì— ëŒ€í•œ ì§ˆë¬¸, ë‹µë³€, ì¡°íšŒ ìˆ˜ ì¶”ì´ë¥¼ í™•ì¸í•˜ì—¬ ê¸°ìˆ ë³„ë¡œ ì°¸ì—¬ìì˜ í¥ë¯¸ë„ í™•ì¸ ê°€ëŠ¥
- ìì£¼ ì‚¬ìš©ë˜ëŠ” íƒœê·¸ë“¤ì„ í™•ì¸í•˜ì—¬ í•´ë‹¹ ê¸°ìˆ ì— ëŒ€í•œ ì§€ì†ì ì¸ ì¸ê¸°ë„ íŒŒì•…

# í”„ë¡œì íŠ¸ ì§„í–‰ ìˆœì„œ

1. ì£¼ì œ ì„ ì •
2. ERD ì‘ì„±
3. ë°ì´í„° í¬ë¡¤ë§ - selenium
4. ë°ì´í„° ì ì¬ - S3
5. í…Œì´ë¸” ìƒì„± - snowflake
6. ì°¨íŠ¸ ìƒì„± ë° ëŒ€ì‹œë³´ë“œ êµ¬ì„± - preset

## 1. ì£¼ì œ ì„ ì •

### **Stackoverflow ì§ˆë¬¸ ë°ì´í„° ë¶„ì„ì„ ìœ„í•œ ëŒ€ì‹œë³´ë“œ**

## 2. ERD ì‘ì„±

![image](https://github.com/stackoverflow-dashboard/crawling/assets/66053902/ac60e504-6bfa-4502-8dec-804b88653f3b)


<aside>
ğŸ’¡ `raw_data` : ì™¸ë¶€ì—ì„œ ê°€ì ¸ì˜¨ ë°ì´í„°ë“¤ì„ í…Œì´ë¸”ì— ì €ì¥í•˜ëŠ” ê³³
`analytics` : raw_dataë¥¼ ê°€ê³µí•´ì„œ summary í•˜ëŠ” ë“±ì˜ ê²°ê³¼ í…Œì´ë¸” ì €ì¥í•˜ëŠ” ê³³

* ê°•ì˜ ë³´ì‹œë©´ `raw_data`ì— ê¸°ë³¸ ì •ë³´ë“¤ ë„£ê³  ì´ë¥¼ ê°€ê³µí•˜ì—¬ ì €ì¥í•œ ê³³ì´ `analytics` !!!

</aside>

## 3. ë°ì´í„° í¬ë¡¤ë§ - selenium
<img width="747" alt="image" src="https://github.com/stackoverflow-dashboard/crawling/assets/80039556/8c24527c-6f74-4f7c-a381-d28b4fff99ea">


ğŸ’¡ ìˆ˜ì§‘ í•­ëª© : `ì§ˆë¬¸ ì œëª©`, `íƒœê·¸`, `ë‹µë³€ ìˆ˜`, `ì¡°íšŒ ìˆ˜`, `ì¼ì‹œ(ë‚ ì§œ)`

ìˆ˜ì§‘ ì¼ì : 2024.2.29 ~ 2024.5.15
ì´ ë°ì´í„° ìˆ˜ : 126,351

## 4. ë°ì´í„° ì ì¬ - S3

![image](https://github.com/stackoverflow-dashboard/crawling/assets/66053902/65d48e3c-02a6-471e-88b8-a49b610b5313)


## 5. í…Œì´ë¸” ìƒì„± - Snowflake

- SQL êµ¬ë¬¸
    
    ```sql
    -- í¬ë¡¤ë§í•œ ë°ì´í„°ë¥¼ ì ì¬í•  SOF_INFO í…Œì´ë¸” ìƒì„±
    CREATE OR REPLACE TABLE dev.raw_data.sof_info (
     question_id int primary key,
     title varchar(200),
     date timestamp,
     tags array,
     answer_cnt int,
     view_cnt int
    );
    
    -- í¬ë¡¤ë§í•œ ë°ì´í„° íŒŒì¼ì¸ CSVë¥¼ S3ì—ì„œ ê°€ì ¸ì™€ì„œ SOF_INFO í…Œì´ë¸”ì— ì ì¬
    COPY INTO dev.raw_data.sof_info
    FROM 's3://{s3 ì£¼ì†Œ}/sof_info.csv'
    credentials=(AWS_KEY_ID='{AWS KEY ë„£ê¸°}' AWS_SECRET_KEY='{AWS SECRET KEY ë„£ê¸°}')
    FILE_FORMAT = (type='CSV' skip_header=1 FIELD_OPTIONALLY_ENCLOSED_BY='"')
    ON_ERROR = CONTINUE;
    
    -- QUESTION í…Œì´ë¸” ìƒì„± (CTAS ë°©ì‹) 
    CREATE OR REPLACE TABLE dev.raw_data.question AS
    SELECT question_id, title, date, answer_cnt, view_cnt
    FROM dev.raw_data.sof_info;
    
    -- TAG í…Œì´ë¸” ìƒì„± (CTAS ë°©ì‹)
    CREATE OR REPLACE TABLE dev.raw_data.tag AS
    SELECT
    	ROW_NUMBER() OVER (ORDER BY date) AS tag_id,
    	question_id,
    	t.value::string AS name
    FROM
    	dev.raw_data.sof_info,
    	LATERAL FLATTEN(input => tags) t;
    
    -- íŠ¹ì • ë‚ ì§œ ì‚­ì œ - 4ì›”18ì¼ê³¼ 5ì›”14ì¼ ì‚­ì œ
    --   1. TAG í…Œì´ë¸”ë¶€í„° ë°ì´í„° ì‚­ì œ
    DELETE FROM raw_data.tag
    WHERE question_id IN (
      SELECT q.question_id
      FROM raw_data.question q
      WHERE TO_DATE(q.date) IN ('2024-04-18', '2024-05-14')
    );
    
    --   2. QUESTION í…Œì´ë¸”ì˜ ë°ì´í„° ì‚­ì œ
    DELETE FROM raw_data.question
    WHERE TO_DATE(date) IN ('2024-04-18', '2024-05-14');
    
    -- 4/18ê³¼ 5/14ì¼ ì‚­ì œëëŠ”ì§€ í™•ì¸ ì¡°íšŒ
    select q.question_id, t.name, TO_DATE(date)
    from raw_data.question q
    join raw_data.tag t on q.question_id = t.question_id
    WHERE TO_DATE(date) IN ('2024-04-18', '2024-05-14');
    ```
    
    <aside>
    ğŸ’¡ ëŒ€ëŸ‰ ë°ì´í„°ë¥¼ ì ì¬í•  ë•ŒëŠ” `INSERT INTO ..` ë³´ë‹¤ëŠ” CTAS ë°©ì‹ì´ ë” íš¨ìœ¨ì ì´ë©° ì„±ëŠ¥ì´ ë” ì¢‹ìœ¼ë¯€ë¡œ ì²˜ìŒì—ëŠ” CTASë¡œ ìƒì„±í•˜ê¸°
    
    </aside>
    

- SOF_INFO í…Œì´ë¸”
    
![image](https://github.com/stackoverflow-dashboard/crawling/assets/66053902/c1753883-c2bc-47ff-a597-21d72fe82751)

    
- QUESTION í…Œì´ë¸”
    
![image](https://github.com/stackoverflow-dashboard/crawling/assets/66053902/b4668750-1dc5-4643-a6c0-bb5f7f31ca7e)

    
- TAG í…Œì´ë¸”
    
![image](https://github.com/stackoverflow-dashboard/crawling/assets/66053902/530f8f10-c538-4333-ba06-ab63ae1324eb)

    

## 6. ì°¨íŠ¸ ìƒì„± ë° ëŒ€ì‹œë³´ë“œ êµ¬ì„± - preset

- **ì°¨íŠ¸ ìƒì„±**
    - ì „ì²´ ì§ˆë¬¸ìˆ˜ - big number
        - ì´ ì§ˆë¬¸ í•©ì‚° ìˆ˜
        
![image](https://github.com/stackoverflow-dashboard/crawling/assets/66053902/b331ead4-da38-4706-a8f6-724dee5ee076)

        
    - ì¼ë³„ ì§ˆë¬¸ìˆ˜ - line chart
        - í•˜ë£¨ë™ì•ˆ ë“±ë¡ëœ ì§ˆë¬¸ í•©ì‚° ìˆ˜
        
![image](https://github.com/stackoverflow-dashboard/crawling/assets/66053902/29c80a40-03a8-4b76-84ef-de5bbdc07f0e)

        
    - ì¼ë³„ ì§ˆë¬¸/ë‹µë³€ ë¹„ìœ¨ - bar chart
        - ì¼ë³„ë¡œ ì§ˆë¬¸ ìˆ˜, ë‹µë³€ ìˆ˜ë¥¼ í•œëˆˆì— ë¹„êµ
        - ì•½ 3ë‹¬ ë™ì•ˆì˜ ì§ˆë¬¸ëŸ‰ ì¶”ì´ íŒŒì•… ê°€ëŠ¥
        
![image](https://github.com/stackoverflow-dashboard/crawling/assets/66053902/7cc840be-94ee-4e21-b0d3-898bd308fd3c)

        
    
    - ìš”ì¼ë³„ ì§ˆë¬¸/ë‹µë³€ ì¶”ì´ - area chart
        - ì–´ë–¤ ìš”ì¼ì— ì§ˆë¬¸/ë‹µë³€ì´ í™œë°œíˆ ì´ë¤„ì¡ŒëŠ”ì§€ íŒŒì•… ê°€ëŠ¥
        
![image](https://github.com/stackoverflow-dashboard/crawling/assets/66053902/2a9aea2f-00ed-41f6-9f78-0d933827a8e8)

        
    - ì‹œê°„ëŒ€ë³„ ì§ˆë¬¸/ë‹µë³€ ì¶”ì´ - area chart
        - ì–´ë–¤ ì‹œê°„ëŒ€ì— ì§ˆë¬¸/ë‹µë³€ì´ í™œë°œíˆ ì´ë¤„ì¡ŒëŠ”ì§€ íŒŒì•… ê°€ëŠ¥
        
![image](https://github.com/stackoverflow-dashboard/crawling/assets/66053902/be56b392-64b3-4d3e-8337-f63ec052c3af)

        
    - ìƒìœ„ íƒœê·¸ 30 - pie chart
        - ê°€ì¥ ë§ì´ ì§ˆë¬¸ëœ íƒœê·¸ 30ìœ„ê¹Œì§€ í‘œí˜„
        - ì§ˆë¬¸ë³„ë¡œ ì‚¬ìš©ëœ ëª¨ë“  íƒœê·¸ í•©ì‚°
        
![image](https://github.com/stackoverflow-dashboard/crawling/assets/66053902/7d5e449f-6e69-49fa-a25d-611b0136cc24)

        
    - ìƒìœ„ íƒœê·¸ 250 - wordcloud
        - ìƒìœ„ 250ê°œ íƒœê·¸ ì›Œë“œ í´ë¼ìš°ë“œë¡œ í‘œí˜„
        
![image](https://github.com/stackoverflow-dashboard/crawling/assets/66053902/4bc95572-d5b6-4bd0-b0ff-c04d60c83f28)

        
    - ìƒìœ„ íƒœê·¸ ì§ˆë¬¸/ì¡°íšŒ/ë‹µë³€ ìˆ˜ ë¹„êµ
        - ì§ˆë¬¸/ì¡°íšŒ/ë‹µë³€ ë³„ ìƒìœ„ íƒœê·¸ 10ê°œ ì„ ë³„
        - ê° íƒœê·¸ë³„ë¡œ ì£¼ë³„ ì§ˆë¬¸/ì¡°íšŒ/ë‹µë³€ ì¶”ì´ë¥¼ í‘œí˜„
        
![image](https://github.com/stackoverflow-dashboard/crawling/assets/66053902/4ad0a8d6-970d-4dd8-a18e-e0ea635d8ad1)

        
![image](https://github.com/stackoverflow-dashboard/crawling/assets/66053902/d115b32a-402f-4b81-996d-ff6276c73503)

        
![image](https://github.com/stackoverflow-dashboard/crawling/assets/66053902/0dd9321d-b186-47f7-9fb8-838e2262d85b)

        
